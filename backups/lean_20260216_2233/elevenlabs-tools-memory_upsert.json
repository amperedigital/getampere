{
  "type": "webhook",
  "name": "memory_upsert",
  "description": "Store a new fact or update an existing one for the caller. Essential for learning user names, preferences, and important facts.",
  "disable_interruptions": false,
  "force_pre_tool_speech": "auto",
  "assignments": [],
  "tool_call_sound": null,
  "tool_call_sound_behavior": "auto",
  "execution_mode": "immediate",
  "api_schema": {
    "url": "https://memory-api.tight-butterfly-7b71.workers.dev/memory/upsert",
    "method": "POST",
    "path_params_schema": [],
    "query_params_schema": [],
    "request_body_schema": {
      "id": "body",
      "type": "object",
      "description": "Fact details and identifying anchors.",
      "properties": [
        {
          "id": "fact",
          "type": "string",
          "value_type": "llm_prompt",
          "description": "The concise fact to store (e.g., 'User owns a black SUV')",
          "dynamic_variable": "",
          "constant_value": "",
          "enum": null,
          "is_system_provided": false,
          "required": true
        },
        {
          "id": "session_id",
          "type": "string",
          "value_type": "llm_prompt",
          "description": "Current conversation ID for session management.",
          "dynamic_variable": "system__conversation_id",
          "constant_value": "",
          "enum": null,
          "is_system_provided": false,
          "required": false
        },
        {
          "id": "subject_e164",
          "type": "string",
          "value_type": "llm_prompt",
          "description": "Caller phone number (E.164). Primary anchor for phone identification. (Optional - VOICE ONLY)",
          "dynamic_variable": "system__caller_id",
          "constant_value": "",
          "enum": null,
          "is_system_provided": false,
          "required": false
        },
        {
          "id": "visitor_id",
          "type": "string",
          "value_type": "dynamic_variable_only",
          "description": "Web Visitor ID (Cookie). Primary anchor for web identification.",
          "dynamic_variable": "visitor_id",
          "constant_value": "",
          "enum": null,
          "is_system_provided": false,
          "required": false
        },
        {
          "id": "email",
          "type": "string",
          "value_type": "llm_prompt",
          "description": "Known email identity of the user.",
          "dynamic_variable": "",
          "constant_value": "",
          "enum": null,
          "is_system_provided": false,
          "required": false
        },
        {
          "id": "subject_id",
          "type": "string",
          "value_type": "llm_prompt",
          "description": "Explicit subject identifier if available.",
          "dynamic_variable": "",
          "constant_value": "",
          "enum": null,
          "is_system_provided": false,
          "required": false
        },
        {
          "id": "fact_type",
          "type": "string",
          "value_type": "llm_prompt",
          "description": "Optional category (vehicle_detail, hobby_detail, etc.).",
          "dynamic_variable": "",
          "constant_value": "",
          "enum": null,
          "is_system_provided": false,
          "required": false
        },
        {
          "id": "confidence",
          "type": "number",
          "value_type": "llm_prompt",
          "description": "Confidence score 0.0 to 1.0 (default 0.8).",
          "dynamic_variable": "",
          "constant_value": "",
          "enum": null,
          "is_system_provided": false,
          "required": false
        }
      ],
      "required": false,
      "value_type": "llm_prompt"
    },
    "request_headers": [
      {
        "type": "value",
        "name": "content-type",
        "value": "application/json"
      },
      {
        "type": "value",
        "name": "x-api-key",
        "value": "15bf5f77-01d1-4e72-b1f7-0587fb4d4e4c"
      },
      {
        "type": "value",
        "name": "x-workspace-id",
        "value": "emily"
      }
    ],
    "auth_connection": null
  },
  "status": "ready",
  "response_timeout_secs": 20,
  "dynamic_variables": {
    "dynamic_variable_placeholders": {}
  }
}